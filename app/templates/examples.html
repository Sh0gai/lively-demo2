{% extends "base.html" %}

{% block content %}

    <h1><i class="fas fa-users me-3"></i>Community Directory</h1>


<div class="container mt-4">
    <p class="lead mb-4">Directory of notable residents and community members in Jones County, Georgia</p>
    <a class="btn btn-primary" href="{{ url_for('examples.show_examples') }}">Show All Residents</a>
    <a class="btn btn-success ml-2" href="{{ url_for('examples.show_examples', add='true') }}">Add Resident</a>
    <table id="data-table" class="table table-striped table-bordered mt-4">
        <thead>
            <tr>
                <th>Year Moved</th>
                <th>Name</th>
                <th>Occupation</th>
                <th>Projects</th>
                <th>Volunteer Hours</th>
                <th>Community Score</th>
                <th>City</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {{ table | safe }}
        </tbody>
    </table>
</div>

<!-- Edit Modal -->
{% if request.args.get('edit_id') %}
<div class="modal fade show" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" style="display: block;" aria-modal="true">
{% else %}
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
{% endif %}
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Edit Resident Info</h5>
        <a href="{{ url_for('examples.show_examples') }}" class="close" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </a>
      </div>
      <div class="modal-body">
        {% if edit_example %}
        <form action="{{ url_for('examples.edit_example', athlete_id=edit_example.athlete_id) }}" method="post">
          <div class="form-group">
            <label for="editName">Name:</label>
            <input type="text" class="form-control" id="editName" name="name" value="{{ edit_example.name }}" required>
          </div>
          <div class="form-group">
            <label for="editPosition">Occupation:</label>
            <input type="text" class="form-control" id="editPosition" name="position" value="{{ edit_example.position }}" required>
          </div>
          <div class="form-group">
            <label for="editGoals">Projects Completed:</label>
            <input type="number" class="form-control" id="editGoals" name="goals" value="{{ edit_example.goals }}" required>
          </div>
          <div class="form-group">
            <label for="editAssists">Volunteer Hours:</label>
            <input type="number" class="form-control" id="editAssists" name="assists" value="{{ edit_example.assists }}" required>
          </div>
          <div class="form-group">
            <label for="editClubName">City:</label>
            <select class="form-control" id="editClubName" name="club_name">
                <option value="Gray" {{ 'selected' if edit_example.club_name == 'Gray' else '' }}>Gray</option>
                <option value="Round Oak" {{ 'selected' if edit_example.club_name == 'Round Oak' else '' }}>Round Oak</option>
                <option value="Haddock" {{ 'selected' if edit_example.club_name == 'Haddock' else '' }}>Haddock</option>
            </select>
          </div>
          <div class="form-group">
            <label for="editGameYear">Year Moved to County:</label>
            <input type="number" class="form-control" id="editGameYear" name="game_year" value="{{ edit_example.game_year or 2024 }}" min="1950" max="2024" required>
          </div>
        </div>
        <div class="modal-footer">
          <a href="{{ url_for('examples.show_examples') }}" class="btn btn-secondary">Cancel</a>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
        </form>
        {% endif %}
    </div>
  </div>
</div>

<!-- Delete Confirmation Modal -->
{% if request.args.get('delete_id') %}
<div class="modal fade show" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" style="display: block;" aria-modal="true">
{% else %}
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
{% endif %}
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
        <a href="{{ url_for('examples.show_examples') }}" class="close" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </a>
      </div>
      <div class="modal-body">
        {% if delete_example %}
        <p>Are you sure you want to delete this example?</p>
        <p><strong>Name:</strong> {{ delete_example.name }}</p>
        <p class="text-danger">This action cannot be undone.</p>
      </div>
      <div class="modal-footer">
        <a href="{{ url_for('examples.show_examples') }}" class="btn btn-secondary">Cancel</a>
        <form action="{{ url_for('examples.delete_example', athlete_id=delete_example.athlete_id) }}" method="post" style="display: inline;">
          <button type="submit" class="btn btn-danger">Delete</button>
        </form>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Add Example Modal -->
{% if request.args.get('add') %}
<div class="modal fade show" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" style="display: block;" aria-modal="true">
{% else %}
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true">
{% endif %}
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addModalLabel">Add New Resident</h5>
        <a href="{{ url_for('examples.show_examples') }}" class="close" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </a>
      </div>
      <div class="modal-body">
        <form action="{{ url_for('examples.add_example') }}" method="post">
          <div class="form-group">
            <label for="addName">Name:</label>
            <input type="text" class="form-control" id="addName" name="name" required>
          </div>
          <div class="form-group">
            <label for="addPosition">Occupation:</label>
            <input type="text" class="form-control" id="addPosition" name="position" required>
          </div>
          <div class="form-group">
            <label for="addGoals">Projects Completed:</label>
            <input type="number" class="form-control" id="addGoals" name="goals" value="0" required>
          </div>
          <div class="form-group">
            <label for="addAssists">Volunteer Hours:</label>
            <input type="number" class="form-control" id="addAssists" name="assists" value="0" required>
          </div>
          <div class="form-group">
            <label for="addClubName">City:</label>
            <select class="form-control" id="addClubName" name="club_name">
                <option value="Gray">Gray</option>
                <option value="Round Oak">Round Oak</option>
                <option value="Haddock">Haddock</option>
            </select>
          </div>
          <div class="form-group">
            <label for="addGameYear">Year Moved to County:</label>
            <input type="number" class="form-control" id="addGameYear" name="game_year" value="2024" min="1950" max="2024" required>
          </div>
        </div>
        <div class="modal-footer">
          <a href="{{ url_for('examples.show_examples') }}" class="btn btn-secondary">Cancel</a>
          <button type="submit" class="btn btn-success">Add Resident</button>
        </div>
        </form>
    </div>
  </div>
</div>

<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
{% endblock %}

{% block scripts %}
    <!--Include the DataTables JavaScript library-->
    <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#data-table').DataTable({
                "paging": true,
                "ordering": true,
                "info": true,
                "searching": true
            });
        });
    </script>
{% endblock %}




